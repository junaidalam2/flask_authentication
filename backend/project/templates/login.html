{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/signup.css') }}">
{% endblock %}

{% block content %}
<div class="column is-4 is-offset-4">
    <h3 class="title has-text-centered">Login</h3>
    <div class="box">

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="notification is-{{ category }}">
            {{ messages[0] }}
        </div>
        {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('auth.login_post') }}">
            <div class="field">
                <label class="label">Email<span>*</span></label>
                <div class="control">
                    <input class="input" type="email" name="email" placeholder="Email" required>
                </div>
            </div>

            <div class="field">
                <label class="label">Password<span>*</span></label>
                <div class="control has-icons-right">
                    <input class="input" type="password" id="password" name="password" placeholder="Password" required>
                    <span class="icon is-small is-right" id="togglePassword">
                        <i class="fas fa-eye"></i>
                    </span>
                </div>
            </div>

            <div class="field">
                <label class="checkbox">
                    <input type="checkbox" name="remember">
                    Remember me
                </label>
            </div>

            <button class="button is-block is-info is-large is-fullwidth">Log In</button>
        </form>

        <p class="has-text-centered mt-3">
            Donâ€™t have an account?
            <a href="{{ url_for('auth.signup_post') }}">Sign up</a>
        </p>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const password = document.getElementById("password");
        const togglePassword = document.getElementById("togglePassword");

        togglePassword.addEventListener("click", () => {
            const type = password.type === "password" ? "text" : "password";
            password.type = type;
            togglePassword.querySelector("i").classList.toggle("fa-eye");
            togglePassword.querySelector("i").classList.toggle("fa-eye-slash");
        });
    });
</script>
{% endblock %}